<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connexion Paljex</title>
<style>
body { font-family: Arial,sans-serif; background: linear-gradient(135deg, #64B5F6, #2196F3); display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
.container { background:white; padding:30px; border-radius:15px; box-shadow:0 8px 20px rgba(0,0,0,.25); text-align:center; max-width:400px; width:90%; animation: fadeIn 1s ease-in-out; }
h1 { color:#2196F3; margin-bottom:20px; font-size:26px; }
input { width:90%; padding:12px; margin:10px 0; font-size:16px; border:1px solid #ccc; border-radius:8px; }
button { width:95%; padding:12px; font-size:16px; border:none; border-radius:8px; cursor:pointer; background:#4CAF50; color:white; transition:.3s; margin-top:10px; }
button:hover { background:#43A047; }
.switch-link { margin-top:15px; color:#555; cursor:pointer; display:block; }
.switch-link:hover { text-decoration:underline; }
#error, #loginError { color:red; margin-top:10px; font-weight:bold; }
@keyframes fadeIn { from { opacity:0; transform:translateY(-20px);} to { opacity:1; transform:translateY(0);} }
</style>
</head>
<body>
<div class="container">
    <h1>Connexion</h1>
    <input type="text" id="loginUsername" placeholder="Pseudo">
    <input type="password" id="loginPassword" placeholder="Mot de passe">
    <button id="loginBtn">Se connecter</button>
    <span class="switch-link" onclick="window.location.href='signup.html'">Pas de compte ? Inscrivez-vous</span>
    <p id="loginError"></p>
</div>

<script>
// Si l'utilisateur est déjà connecté, redirige vers l'accueil
if(localStorage.getItem('currentUser')){
    window.location.href='index.html';
}

document.getElementById('loginBtn').addEventListener('click', ()=>{
    const user = document.getElementById('loginUsername').value.trim();
    const pass = document.getElementById('loginPassword').value.trim();
    const errorEl = document.getElementById('loginError');
    errorEl.textContent='';

    if(!user || !pass){
        errorEl.textContent = "Veuillez remplir tous les champs.";
        return;
    }

    const users = JSON.parse(localStorage.getItem('users')) || {};

    if(users[user] && users[user].password === pass){
        // Connexion réussie
        localStorage.setItem('currentUser', user);
        window.location.href='index.html';
    } else {
        errorEl.textContent = "Pseudo ou mot de passe incorrect.";
    }
});
</script>
</body>
</html>